FAIL src/common/guards/api-key.guard.spec.ts (10.308 s)
  ApiKeyGuard
    Ã— should throw ForbiddenException if account is suspended (56 ms)
    â—‹ skipped should throw UnauthorizedException if no API key is provided
    â—‹ skipped should throw UnauthorizedException if API key is invalid
    â—‹ skipped should allow request and update balance atomically

  â— ApiKeyGuard â€º should throw ForbiddenException if account is suspended

    expect(received).rejects.toThrow(expected)

    Expected constructor: ForbiddenException
    Received constructor: UnauthorizedException

    Received message: "Associated user account not found"

        [0m [90m 100 |[39m             [36mconst[39m user [33m=[39m dbKey[33m.[39muser[33m;[39m
         [90m 101 |[39m             [36mif[39m ([33m![39muser) {
        [31m[1m>[22m[39m[90m 102 |[39m                 [36mthrow[39m [36mnew[39m [33mUnauthorizedException[39m({
         [90m     |[39m                       [31m[1m^[22m[39m
         [90m 103 |[39m                     statusCode[33m:[39m [35m401[39m[33m,[39m
         [90m 104 |[39m                     error[33m:[39m [32m'USER_NOT_FOUND'[39m[33m,[39m
         [90m 105 |[39m                     message[33m:[39m [32m'Associated user account not found'[39m[33m,[39m[0m

      at ApiKeyGuard.canActivate (common/guards/api-key.guard.ts:102:23)
      at Object.<anonymous> (common/guards/api-key.guard.spec.ts:161:9)
      at Object.toThrow (../node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (common/guards/api-key.guard.spec.ts:161:58)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 3 skipped, 4 total
Snapshots:   0 total
Time:        10.826 s
Ran all test suites matching /src\\common\\guards\\api-key.guard.spec.ts/i with tests matching "should throw ForbiddenException if account is suspended".
